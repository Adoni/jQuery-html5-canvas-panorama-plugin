<!DOCTYPE html>
<html>
<body>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"> </script>
    <script type="text/javascript" src="./jquery.ba-outside-events.min.js"> </script>
    <script type="text/javascript" src="./ddpanorama.js"> </script>
    
    <img class="aligncenter size-full wp-image-458" title="IMG_5639" src="PanoSarek.jpg" alt="" />
    <img class="aligncenter size-full wp-image-458" title="IMG_5639" src="PanoSarek.jpg" alt="" />
	<br />
	<button id="original">original size</button>
	<button id="size1">1024x768</button>
	<button id="fullscreen">fullscreen</button>
    <script>
		
		//code snippet from http://www.sitepoint.com/html5-full-screen-api/
		var pfx = ["webkit", "moz", "ms", "o", ""];
		function RunPrefixMethod(obj, method) {
			var p = 0, m, t;
			while (p < pfx.length && !obj[m]) {
				m = method;
				if (pfx[p] == "") {
					m = m.substr(0,1).toLowerCase() + m.substr(1);
				}
				m = pfx[p] + m;
				t = typeof obj[m];
				if (t != "undefined") {
					//console.log("m:"+m);
					pfx = [pfx[p]];
					return (t == "function" ? obj[m]() : obj[m]);
				}
				p++;
			}
		}
		//end of code snippet
		var sizeparameter_original={ratio:9/16};
		var sizeparameter=sizeparameter_original;
		var sizeparameter_full={};
		function refreshPanoramaSize(parameter)
		{
			jQuery("img").ddpanorama(parameter);
		}
		
		function launchFullScreen() {
			RunPrefixMethod(document.documentElement, "RequestFullScreen");
		}
		
		function fullScreenEnabled()
		{
			return RunPrefixMethod(document, "FullScreen") || RunPrefixMethod(document, "IsFullScreen");
		}
		
		function cancelFullScreen()
		{
			if (fullScreenEnabled())
			{
				//console.log("exit fullscreen");
				RunPrefixMethod(document, "CancelFullScreen");
			}
			else
			{
				//console.log("not a fullscreen mode");
				refreshPanoramaSize(sizeparameter);
			}
		}
		
		
		
        //see
        jQuery(function(){
			   jQuery("img").ddpanorama(sizeparameter_original).bind("ddpanorama_redraw", function(event){
                                                                      //do something here to handle redraw event
                                                                      //event.speed contains a speed (px/sec)
                                                                      //event.canvas contains a canvas element
                                                                      //event.loaded contains a boolean flag which indicates whether the image is loaded or not 
                                                                      //(I'll add more compelling examples later)
                                                                      });
			   
			   var screen_change_events = "webkitfullscreenchange mozfullscreenchange fullscreenchange";
			   $(document).on(screen_change_events, function ()
							  {
							  //console.log("screen_change_events");
									if (fullScreenEnabled())
									{
										//console.log("window.innerWidth:"+window.innerWidth);
										//sizeparameter_full={width:window.innerWidth, height:window.innerHeight};
										sizeparameter_full={width:$(document).width(), height:$(document).height()};
										refreshPanoramaSize(sizeparameter_full);
									}
									else
									{
										refreshPanoramaSize(sizeparameter);
									}
							  });
			   jQuery("#original").click(function(){
										 sizeparameter=sizeparameter_original;
										 cancelFullScreen();
									 });
			   jQuery("#size1").click(function(){
									  sizeparameter={width:1024, height:768};
									  cancelFullScreen();
									 });
			   
			   jQuery("#fullscreen").click(function(){
										   
										   launchFullScreen();
										   
										   });
			   
			   });
    </script>
</body>
</html>